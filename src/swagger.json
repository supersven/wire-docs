{"swagger":"2.0","info":{"version":"","title":"Wire-Server API as Swagger 2.0 ","description":"NOTE: only a few endpoints are visible here at the moment, more will come as we migrate them to Swagger 2.0. In the meantime please also look at the old swagger docs link for the not-yet-migrated endpoints. See https://docs.wire.com/understand/api-client-perspective/swagger.html for the old endpoints."},"paths":{"/users/{uid}":{"get":{"summary":"Get a user by UserId (deprecated)","produces":["application/json;charset=utf-8"],"parameters":[{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"description":"`uid` not found"},"200":{"schema":{"$ref":"#/definitions/UserProfile"},"description":""}}},"head":{"summary":"Check if a user ID exists (deprecated)","produces":["application/json;charset=utf-8"],"parameters":[{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"schema":{"type":"string","description":"user not found"},"description":"`uid` or "},"200":{"schema":{"type":"string"},"description":""}}}},"/users/{domain}/{uid}":{"get":{"summary":"Get a user by Domain and UserId","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"description":"`domain` or `uid` not found"},"200":{"schema":{"$ref":"#/definitions/UserProfile"},"description":""}}},"head":{"summary":"Check if a user ID exists","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"schema":{"type":"string","description":"user not found"},"description":"`domain` or `uid` or "},"200":{"schema":{"type":"string"},"description":""}}}},"/self":{"get":{"summary":"Get your own profile","produces":["application/json;charset=utf-8"],"responses":{"200":{"schema":{"$ref":"#/definitions/User"},"description":""}}}},"/users/handles/{handle}":{"get":{"summary":"(deprecated, use /search/contacts) Get information on a user handle","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"handle","type":"string","description":"The user handle"}],"responses":{"404":{"description":"`handle` not found"},"200":{"schema":{"$ref":"#/definitions/UserHandleInfo"},"description":""}}}},"/users/by-handle/{domain}/{handle}":{"get":{"summary":"(deprecated, use /search/contacts) Get information on a user handle","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"required":true,"in":"path","name":"handle","type":"string","description":"The user handle"}],"responses":{"404":{"description":"`domain` or `handle` not found"},"200":{"schema":{"$ref":"#/definitions/UserProfile"},"description":""}}}},"/users":{"get":{"summary":"List users (deprecated)","description":"The 'ids' and 'handles' parameters are mutually exclusive.","produces":["application/json;charset=utf-8"],"parameters":[{"required":false,"in":"query","name":"ids","type":"string","description":"User IDs of users to fetch"},{"minItems":1,"items":{"type":"string"},"required":false,"in":"query","name":"handles","maxItems":4,"collectionFormat":"csv","type":"array","description":"Handles of users to fetch, min 1 and max 4 (the check for handles is rather expensive)"}],"responses":{"400":{"description":"Invalid `handles` or `ids`"},"200":{"schema":{"items":{"$ref":"#/definitions/UserProfile"},"type":"array"},"description":""}}}},"/list-users":{"post":{"summary":"List users","description":"The 'qualified_ids' and 'qualified_handles' parameters are mutually exclusive.","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"$ref":"#/definitions/ListUsersQuery"},"in":"body","name":"body"}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"items":{"$ref":"#/definitions/UserProfile"},"type":"array"},"description":""}}}},"/users/{uid}/clients":{"get":{"summary":"Get all of a user's clients (deprecated).","produces":["application/json;charset=utf-8"],"parameters":[{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"description":"`uid` not found"},"200":{"schema":{"items":{"$ref":"#/definitions/PubClient"},"type":"array"},"description":""}}}},"/users/{domain}/{uid}/clients":{"get":{"summary":"Get all of a user's clients.","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"description":"`domain` or `uid` not found"},"200":{"schema":{"items":{"$ref":"#/definitions/PubClient"},"type":"array"},"description":""}}}},"/users/{uid}/clients/{client}":{"get":{"summary":"Get a specific client of a user (deprecated).","produces":["application/json;charset=utf-8"],"parameters":[{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"},{"required":true,"in":"path","name":"client","type":"string","description":"ClientId"}],"responses":{"404":{"description":"`uid` or `client` not found"},"200":{"schema":{"$ref":"#/definitions/PubClient"},"description":""}}}},"/users/{domain}/{uid}/clients/{client}":{"get":{"summary":"Get a specific client of a user.","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"},{"required":true,"in":"path","name":"client","type":"string","description":"ClientId"}],"responses":{"404":{"description":"`domain` or `uid` or `client` not found"},"200":{"schema":{"$ref":"#/definitions/PubClient"},"description":""}}}},"/users/list-clients":{"post":{"summary":"List all clients for a set of user ids","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"items":{"$ref":"#/definitions/Qualified Id"},"type":"array"},"in":"body","name":"body"}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"$ref":"#/definitions/QualifiedUserMap (Set PubClient)"},"description":""}}}},"/users/{uid}/prekeys/{client}":{"get":{"summary":"(deprecated) Get a prekey for a specific client of a user.","produces":["application/json;charset=utf-8"],"parameters":[{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"},{"required":true,"in":"path","name":"client","type":"string","description":"ClientId"}],"responses":{"404":{"description":"`uid` or `client` not found"},"200":{"schema":{"$ref":"#/definitions/ClientPrekey"},"description":""}}}},"/users/{domain}/{uid}/prekeys/{client}":{"get":{"summary":"Get a prekey for a specific client of a user.","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"},{"required":true,"in":"path","name":"client","type":"string","description":"ClientId"}],"responses":{"404":{"description":"`domain` or `uid` or `client` not found"},"200":{"schema":{"$ref":"#/definitions/ClientPrekey"},"description":""}}}},"/users/{uid}/prekeys":{"get":{"summary":"(deprecated) Get a prekey for each client of a user.","produces":["application/json;charset=utf-8"],"parameters":[{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"description":"`uid` not found"},"200":{"schema":{"$ref":"#/definitions/PrekeyBundle"},"description":""}}}},"/users/{domain}/{uid}/prekeys":{"get":{"summary":"Get a prekey for each client of a user.","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":"domain","type":"string"},{"format":"uuid","required":true,"in":"path","name":"uid","type":"string","description":"User Id"}],"responses":{"404":{"description":"`domain` or `uid` not found"},"200":{"schema":{"$ref":"#/definitions/PrekeyBundle"},"description":""}}}},"/users/prekeys":{"post":{"summary":"(deprecated)  Given a map of user IDs to client IDs return a prekey for each one. You can't request information for more users than maximum conversation size.","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"$ref":"#/definitions/UserClients"},"in":"body","name":"body"}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"$ref":"#/definitions/UserClientMap (Maybe Prekey)"},"description":""}}}},"/users/list-prekeys":{"post":{"summary":"Given a map of domain to (map of user IDs to client IDs) return a prekey for each one. You can't request information for more users than maximum conversation size.","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"$ref":"#/definitions/QualifiedUserClients"},"in":"body","name":"body"}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"$ref":"#/definitions/QualifiedUserClientMap (Maybe Prekey)"},"description":""}}}},"/search/contacts":{"get":{"summary":"Search for users","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"query","name":"q","type":"string","description":"Search query"},{"required":false,"in":"query","name":"domain","type":"string","description":"Searched domain. Note: This is optional only for backwards compatibility, future versions will mandate this."},{"maximum":500,"format":"int32","minimum":1,"required":false,"in":"query","name":"size","type":"integer","description":"Number of results to return (min: 1, max: 500, default 15)"}],"responses":{"400":{"description":"Invalid `size` or `domain` or `q`"},"200":{"schema":{"$ref":"#/definitions/SearchResult"},"description":""}}}}},"definitions":{"UserProfile":{"required":["qualified_id","name","picture","assets","accent_id"],"properties":{"qualified_id":{"$ref":"#/definitions/Qualified Id"},"name":{"type":"string"},"picture":{"items":{"$ref":"#/definitions/Object"},"type":"array"},"assets":{"items":{"$ref":"#/definitions/Asset"},"type":"array"},"accent_id":{"maximum":2147483647,"format":"int32","minimum":-2147483648,"type":"integer"},"deleted":{"type":"boolean"},"service":{"$ref":"#/definitions/ServiceRef"},"handle":{"type":"string"},"locale":{"type":"string"},"expires_at":{"$ref":"#/definitions/UTCTime"},"team":{"$ref":"#/definitions/UUID"},"email":{"type":"string"},"id":{"example":"00000000-0000-0000-0000-000000000000","format":"uuid","type":"string","description":"Deprecated, use qualified_id"}},"type":"object"},"Qualified Id":{"properties":{"id":{"$ref":"#/definitions/UUID"},"domain":{"type":"string"}},"type":"object"},"UUID":{"example":"00000000-0000-0000-0000-000000000000","format":"uuid","type":"string"},"Object":{"description":"Arbitrary JSON object.","additionalProperties":true,"type":"object"},"Asset":{"required":["key"],"properties":{"key":{"type":"string"},"size":{"$ref":"#/definitions/AssetSize"},"type":{"enum":["image"]}},"type":"object"},"AssetSize":{"type":"string","enum":["complete","preview"]},"ServiceRef":{"required":["id","provider"],"properties":{"id":{"$ref":"#/definitions/UUID"},"provider":{"$ref":"#/definitions/UUID"}},"type":"object"},"UTCTime":{"example":"2016-07-22T00:00:00Z","format":"yyyy-mm-ddThh:MM:ssZ","type":"string"},"User":{"required":["id","qualified_id","name","picture","assets","accent_id","locale","managed_by"],"properties":{"email":{"type":"string"},"phone":{"type":"string"},"sso_id":{"$ref":"#/definitions/UserSSOId"},"id":{"$ref":"#/definitions/UUID"},"qualified_id":{"$ref":"#/definitions/Qualified Id"},"name":{"type":"string"},"picture":{"items":{"$ref":"#/definitions/Object"},"type":"array"},"assets":{"items":{"$ref":"#/definitions/Asset"},"type":"array"},"accent_id":{"maximum":2147483647,"format":"int32","minimum":-2147483648,"type":"integer"},"deleted":{"type":"boolean"},"locale":{"type":"string"},"service":{"$ref":"#/definitions/ServiceRef"},"handle":{"type":"string"},"expires_at":{"$ref":"#/definitions/UTCTime"},"team":{"$ref":"#/definitions/UUID"},"managed_by":{"$ref":"#/definitions/ManagedBy"}},"type":"object"},"UserSSOId":{"properties":{"tenant":{"type":"string"},"subject":{"type":"string"},"scim_external_id":{"type":"string"}},"type":"object"},"userIdentity":{"properties":{"email":{"type":"string"},"phone":{"type":"string"},"sso_id":{"$ref":"#/definitions/UserSSOId"}},"type":"object"},"ManagedBy":{"type":"string","enum":["wire","scim"]},"UserHandleInfo":{"properties":{"user":{"example":"00000000-0000-0000-0000-000000000000","format":"uuid","type":"string","description":"Deprecated, use qualified_user"},"qualified_user":{"$ref":"#/definitions/Qualified Id"}},"type":"object"},"ListUsersQuery":{"description":"exactly one of qualifie_ids or qualified_handles must be provided.","properties":{"qualified_ids":{"items":{"$ref":"#/definitions/Qualified Id"},"type":"array"},"qualified_handles":{"items":{"$ref":"#/definitions/Qualified Handle"},"type":"array"}},"example":{"qualified_ids":[{"domain":"example.com","id":"00000000-0000-0000-0000-000000000000"}]},"type":"object"},"Qualified Handle":{"properties":{"handle":{"type":"string"},"domain":{"type":"string"}},"type":"object"},"PubClient":{"required":["id"],"properties":{"id":{"type":"string"},"class":{"$ref":"#/definitions/ClientClass"}},"type":"object"},"ClientClass":{"type":"string","enum":["phone","tablet","desktop","legalhold"]},"QualifiedUserMap (Set PubClient)":{"description":"Map of Domain to (UserMap (Set PubClient)).","additionalProperties":{"$ref":"#/definitions/UserMap (Set PubClient)"},"example":{"domain1.example.com":{"000600d0-000b-9c1a-000d-a4130002c221":[{"id":"d0","class":"legalhold"}]}},"type":"object"},"UserMap (Set PubClient)":{"description":"Map of UserId to (Set PubClient)","additionalProperties":{"uniqueItems":true,"items":{"$ref":"#/definitions/PubClient"},"type":"array"},"example":{"000600d0-000b-9c1a-000d-a4130002c221":[{"id":"d0","class":"legalhold"}]},"type":"object"},"ClientPrekey":{"required":["client","prekey"],"properties":{"client":{"type":"string"},"prekey":{"$ref":"#/definitions/Prekey"}},"type":"object"},"Prekey":{"required":["id","key"],"properties":{"id":{"maximum":65535,"minimum":0,"type":"integer"},"key":{"type":"string"}},"type":"object"},"PrekeyBundle":{"required":["user","clients"],"properties":{"user":{"$ref":"#/definitions/UUID"},"clients":{"items":{"$ref":"#/definitions/ClientPrekey"},"type":"array"}},"type":"object"},"UserClientMap (Maybe Prekey)":{"additionalProperties":{"additionalProperties":{"$ref":"#/definitions/Prekey"},"type":"object"},"example":{"000600d0-000b-9c1a-000d-a4130002c221":{"44901fb0712e588f":{"key":"pQABAQECoQBYIOjl7hw0D8YRNq...","id":1}}},"type":"object"},"UserClients":{"description":"Map of user id to list of client ids.","additionalProperties":{"uniqueItems":true,"items":{"type":"string"},"type":"array"},"example":{"000600d0-000b-9c1a-000d-a4130002c221":["60f85e4b15ad3786","6e323ab31554353b"]},"type":"object"},"QualifiedUserClientMap (Maybe Prekey)":{"description":"Map of Domain to (UserMap (Maybe Prekey)).","additionalProperties":{"$ref":"#/definitions/UserClientMap (Maybe Prekey)"},"example":{"domain1.example.com":{"000600d0-000b-9c1a-000d-a4130002c221":{"44901fb0712e588f":{"key":"pQABAQECoQBYIOjl7hw0D8YRNq...","id":1}}}},"type":"object"},"QualifiedUserClients":{"description":"Map of Domain to UserClients","additionalProperties":{"$ref":"#/definitions/UserClients"},"example":{"domain1.example.com":{"000600d0-000b-9c1a-000d-a4130002c221":["60f85e4b15ad3786","6e323ab31554353b"]}},"type":"object"},"SearchResult":{"required":["found","returned","took","documents"],"properties":{"found":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer","description":"Total number of hits"},"returned":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer","description":"Total number of hits returned"},"took":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer","description":"Search time in ms"},"documents":{"items":{"$ref":"#/definitions/Contact"},"type":"array","description":"List of contacts found"}},"type":"object"},"Contact":{"required":["qualified_id","name"],"properties":{"qualified_id":{"$ref":"#/definitions/Qualified Id"},"name":{"type":"string"},"accent_id":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"},"handle":{"type":"string"},"team":{"$ref":"#/definitions/UUID"},"id":{"$ref":"#/definitions/UUID"}},"type":"object"}},"securityDefinitions":{"ZAuth":{"in":"header","name":"Authorization","type":"apiKey","description":"Must be a token retrieved by calling 'POST /login' or 'POST /access'. It must be presented in this format: 'Bearer \\<token\\>'."}},"security":[{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]},{"ZAuth":[]}]}